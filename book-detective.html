<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­Ù‚Ù‚ Ø§Ù„ÙƒØªØ¨ â€“ MARC21 â€“ MaktabaPlay</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --brand: #22c55e;
            --brand-2: #06b6d4;
            --text: #e2e8f0;
            --muted: #94a3b8;
            --border: #1e293b;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #0b0f17;
            --card-bg: #0e1626;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(180deg, #0b0f17, #0f172a);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .navbar {
            background: linear-gradient(90deg, #0e1626, #0b1220);
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
            font-size: 20px;
            color: white;
        }

        .brand-badge {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--brand), var(--brand-2));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #041014;
            font-weight: 800;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-weight: 600;
            transition: 0.2s;
            padding: 5px 10px;
            border-radius: 20px;
        }

        .nav-links a:hover,
        .nav-links a.active {
            background: rgba(6, 182, 212, 0.1);
            color: var(--brand-2);
        }

        footer {
            background: linear-gradient(90deg, #0e1626, #0b1220);
            border-top: 1px solid var(--border);
            padding: 20px 0;
            margin-top: auto;
            text-align: center;
            color: var(--muted);
        }

        .footer-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        footer a {
            color: var(--brand-2);
            text-decoration: none;
        }

        /* ===== ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù…Ø­Ù‚Ù‚ Ø§Ù„ÙƒØªØ¨ â€“ MARC21 ===== */
        .detective-container {
            max-width: 1100px;
            margin: 40px auto;
            background: linear-gradient(180deg, #0e1626, #0b1220 60%);
            border: 1px solid var(--border);
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(2, 6, 23, 0.6);
            color: var(--text);
        }

        .detective-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .detective-header h1 {
            font-size: 3.2rem;
            font-weight: 800;
            color: white;
            margin-bottom: 10px;
        }

        .detective-header p {
            color: var(--muted);
            font-size: 1.1rem;
        }

        .detective-level-info {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 30px;
            align-items: center;
            margin-bottom: 30px;
        }

        .detective-level-display,
        .detective-score-display {
            background: linear-gradient(135deg, var(--brand), var(--brand-2));
            padding: 20px;
            border-radius: 20px;
            color: #041014;
            text-align: center;
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.2);
        }

        .detective-level-label,
        .detective-score-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .detective-level-number,
        .detective-score-number {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
        }

        .detective-progress-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .detective-progress-bar {
            height: 12px;
            background: #1e293b;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .detective-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), #4ade80);
            transition: width 0.5s;
            border-radius: 10px;
        }

        .detective-progress-text {
            font-size: 0.9rem;
            text-align: center;
            color: var(--muted);
        }

        .detective-case-section {
            background: #0b1220;
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .detective-case-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .detective-case-icon {
            font-size: 2rem;
        }

        .detective-case-title {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--brand-2);
        }

        .detective-case-description {
            color: #cbd5e1;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .detective-difficulty-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 30px;
            font-weight: 600;
            margin-top: 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid;
        }

        .detective-difficulty-easy {
            color: var(--success);
            border-color: var(--success);
        }

        .detective-difficulty-medium {
            color: var(--warning);
            border-color: var(--warning);
        }

        .detective-difficulty-hard {
            color: var(--danger);
            border-color: var(--danger);
        }

        .detective-marc-record {
            background: #0b1220;
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 30px;
            font-family: 'Courier New', monospace;
        }

        .detective-marc-record h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-family: 'Tajawal', sans-serif;
        }

        .marc-field {
            display: flex;
            gap: 20px;
            padding: 12px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border);
            border-radius: 16px;
            align-items: flex-start;
        }

        .marc-field-tag {
            font-weight: 700;
            color: #a5f3fc;
            min-width: 80px;
            padding: 4px 8px;
            background: rgba(165, 243, 252, 0.1);
            border-radius: 8px;
            text-align: center;
        }

        .marc-field-ind {
            color: #f87171;
            font-weight: 600;
            min-width: 50px;
            padding: 4px 8px;
            background: rgba(248, 113, 113, 0.1);
            border-radius: 8px;
            text-align: center;
            letter-spacing: 2px;
        }

        .marc-field-content {
            flex: 1;
            color: #e2e8f0;
            word-break: break-word;
        }

        .marc-field.has-error {
            border-right: 4px solid var(--danger);
            background: rgba(239, 68, 68, 0.05);
        }

        .detective-error-badge {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
            border: 1px solid var(--danger);
            display: inline-block;
        }

        .detective-question-section {
            background: #0b1220;
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .detective-question-text {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .detective-input-wrapper {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .detective-input-wrapper input {
            flex: 1;
            padding: 16px;
            background: #0f1a2f;
            border: 1px solid var(--border);
            border-radius: 16px;
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
            color: white;
        }

        .detective-input-wrapper input:focus {
            outline: none;
            border-color: var(--brand-2);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
        }

        .detective-input-wrapper input::placeholder {
            color: #4b5563;
        }

        .detective-btn {
            padding: 14px 28px;
            border: none;
            border-radius: 40px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
            font-family: 'Tajawal', sans-serif;
            font-size: 1rem;
        }

        .detective-btn-primary {
            background: linear-gradient(135deg, var(--brand), var(--brand-2));
            color: #041014;
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.2);
        }

        .detective-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(6, 182, 212, 0.3);
        }

        .detective-btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .detective-btn-hint {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            color: var(--text);
        }

        .detective-btn-hint:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .detective-btn-next {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            width: 100%;
            padding: 16px;
            font-size: 1.1rem;
            margin-top: 20px;
        }

        .detective-hint-container {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning);
            border-radius: 16px;
            padding: 16px;
            margin-top: 15px;
            display: none;
        }

        .detective-hint-container.show {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .detective-hint-title {
            color: var(--warning);
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            gap: 8px;
        }

        .detective-hint-text {
            color: #fcd34d;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        .detective-feedback {
            padding: 20px;
            border-radius: 16px;
            margin: 20px 0;
            display: none;
            align-items: center;
            gap: 12px;
            border: 1px solid;
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0% {
                transform: scale(0.95);
                opacity: 0;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .detective-feedback.show {
            display: flex;
        }

        .detective-feedback.correct {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--success);
            color: var(--success);
        }

        .detective-feedback.incorrect {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--danger);
            color: var(--danger);
        }

        .detective-feedback-icon {
            font-size: 1.8rem;
        }

        .detective-game-over {
            text-align: center;
            padding: 40px 20px;
        }

        .detective-game-over h2 {
            font-size: 3rem;
            color: white;
            margin-bottom: 20px;
        }

        .detective-final-score {
            font-size: 4rem;
            font-weight: 800;
            color: var(--brand-2);
            margin: 30px 0;
        }

        .detective-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .detective-stat-item {
            background: #0b1220;
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
        }

        .detective-stat-label {
            color: var(--muted);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .detective-stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--brand-2);
        }

        .marc-info {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid var(--brand-2);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 0.95rem;
            color: #a5f3fc;
        }

        @media (max-width: 768px) {
            .detective-container {
                padding: 20px;
            }

            .detective-level-info {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .detective-input-wrapper {
                flex-direction: column;
            }

            .marc-field {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="brand">
                <div class="brand-badge">Ù…Ù€</div>
                <span>MaktabaPlay</span>
            </div>
            <div class="nav-links">
                <a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                <a href="hangman.html">Ù‡Ø§Ù†Ø¬ Ù…Ø§Ù† Ø§Ù„Ù…Ø®Ø·ÙˆØ·</a>
                <a href="ladder-classification.html">Ø§Ù„Ø³Ù„Ù… ÙˆØ§Ù„ØªØµÙ†ÙŠÙ</a>
                <a href="book-detective.html" class="active">Ù…Ø­Ù‚Ù‚ Ø§Ù„ÙƒØªØ¨</a>
                <a href="about.html">Ù…Ù† Ù†Ø­Ù†</a>
                <a href="contact.html">ØªÙˆØ§ØµÙ„</a>
                <a href="partners.html">Ø´Ø±ÙƒØ§Ø¡</a>
            </div>
        </div>
    </nav>

    <div style="flex:1; display: flex; align-items: center; justify-content: center; padding: 20px;">
        <div class="detective-container" id="gameContent">
            <div class="detective-header">
                <h1>ğŸ” Ù…Ø­Ù‚Ù‚ Ø§Ù„ÙƒØªØ¨ â€“ MARC21</h1>
                <p>Ø§ÙƒØªØ´Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ ØªØ³Ø¬ÙŠÙ„Ø§Øª MARC21 Ø§Ù„Ø¨ÙŠØ¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©</p>
            </div>

            <div class="detective-level-info">
                <div class="detective-level-display">
                    <div class="detective-level-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰</div>
                    <div class="detective-level-number" id="levelNumber">1</div>
                </div>
                <div class="detective-progress-container">
                    <div class="detective-progress-bar">
                        <div class="detective-progress-fill" id="progressFill" style="width: 10%;"></div>
                    </div>
                    <div class="detective-progress-text" id="progressText">1/10</div>
                </div>
                <div class="detective-score-display">
                    <div class="detective-score-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                    <div class="detective-score-number" id="scoreDisplay">0</div>
                </div>
            </div>

            <div class="detective-case-section">
                <div class="detective-case-header">
                    <span class="detective-case-icon" id="caseIcon">ğŸ“–</span>
                    <h2 class="detective-case-title" id="caseTitle">Ø§Ù„Ù‚Ø¶ÙŠØ©</h2>
                </div>
                <p class="detective-case-description" id="caseDescription"></p>
                <div id="difficultyBadge" class="detective-difficulty-badge"></div>
            </div>

            <div class="marc-info" id="marcInfo"></div>

            <div class="detective-marc-record">
                <h3><span>ğŸ“š</span> ØªØ³Ø¬ÙŠÙ„Ø© MARC21</h3>
                <div id="marcRecordDisplay"></div>
            </div>

            <div class="detective-question-section">
                <div class="detective-question-text" id="questionText"></div>
                <div class="detective-input-wrapper">
                    <input type="text" id="answerInput" placeholder="Ø§ÙƒØªØ¨ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§...">
                    <button class="detective-btn detective-btn-primary" id="submitBtn">Ø¥Ø±Ø³Ø§Ù„</button>
                </div>
                <button class="detective-btn detective-btn-hint" id="hintBtn">ğŸ’¡ ØªÙ„Ù…ÙŠØ­</button>
                <div class="detective-hint-container" id="hintContainer">
                    <div class="detective-hint-title">
                        <span>ğŸ’­</span>
                        <span>ØªÙ„Ù…ÙŠØ­ Ù…ÙÙŠØ¯</span>
                    </div>
                    <div class="detective-hint-text" id="hintText"></div>
                </div>
                <div class="detective-feedback" id="feedback"></div>
                <div id="nextButtonContainer" style="display: none;">
                    <button class="detective-btn detective-btn-next" id="nextBtn">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ â†’</button>
                </div>
            </div>
        </div>

        <div id="gameOverContent" style="display: none; width:100%;">
            <div class="detective-container detective-game-over">
                <h2>ğŸ‰ Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø©!</h2>
                <p class="detective-final-score" id="finalScore">0</p>
                <p id="finalMessage" style="font-size:1.2rem; margin:20px 0; color: var(--muted);"></p>
                <div class="detective-stats">
                    <div class="detective-stat-item">
                        <div class="detective-stat-label">Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª</div>
                        <div class="detective-stat-value" id="statsLevels">0</div>
                    </div>
                    <div class="detective-stat-item">
                        <div class="detective-stat-label">Ø§Ù„ØµØ­ÙŠØ­Ø©</div>
                        <div class="detective-stat-value" id="statsCorrect">0</div>
                    </div>
                    <div class="detective-stat-item">
                        <div class="detective-stat-label">Ù…ØªÙˆØ³Ø· Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                        <div class="detective-stat-value" id="statsAverage">0</div>
                    </div>
                    <div class="detective-stat-item">
                        <div class="detective-stat-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­</div>
                        <div class="detective-stat-value" id="statsSuccess">100%</div>
                    </div>
                </div>
                <button class="detective-btn detective-btn-primary" onclick="location.reload()">ğŸ”„ Ø§Ù„Ø¹Ø¨ Ù…Ø¬Ø¯Ø¯Ø§Ù‹</button>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-inner">
            <div>Â© 2026 MaktabaPlay â€“ Ù…Ù†ØµØ© Ø£Ù„Ø¹Ø§Ø¨ Ù…ÙƒØªØ¨ÙŠØ© Ø¹Ø±Ø¨ÙŠØ©</div>
            <div><a href="contact.html">Ø§ØªØµÙ„ Ø¨Ù†Ø§</a> Â· <a href="partners.html">Ø´Ø±Ø§ÙƒØ§Øª</a></div>
        </div>
    </footer>

    <script>
        // Ù…Ø³ØªÙˆÙŠØ§Øª Ù…Ø®ØµØµØ© Ù„Ù…Ø§Ø±Ùƒ21
        // ØªÙ… Ø§Ø³ØªØ¨Ø¯Ø§Ù„ | Ø¨Ù€ $ ÙˆØªÙ… ÙˆØ¶Ø¹ # Ù…ÙƒØ§Ù† Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ÙØ§Ø±ØºØ© Ø£Ùˆ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© Ù„ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø®Ø·Ø£
        const levels = [
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 100 (Ø§Ù„Ù…Ø¤Ù„Ù Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ) ÙŠØ³ØªØ®Ø¯Ù… Ù…Ø¤Ø´Ø±Ø§Øª Ø®Ø§Ø·Ø¦Ø©. Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† ÙØ§Ø±ØºØ§Ù‹ (Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¤Ø´Ø±).",
                icon: "ğŸ‘¤",
                difficulty: "Ø³Ù‡Ù„",
                difficultyClass: "easy",
                marcInfo: "ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ 100: Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø£ÙˆÙ„ = 1 (Ø§Ø³Ù… Ø¹Ø§Ø¦Ù„Ø©)ØŒ Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ = # (ÙØ±Ø§Øº/ØºÙŠØ± Ù…Ø¹Ø±Ù).",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "008", ind: "##", content: "210514s1949    enk           000 1 eng d" },
                    { tag: "020", ind: "##", content: "$a 9780451524935" },
                    { tag: "100", ind: "10", content: "$a Orwell, George, $d 1903-1950." },
                    { tag: "245", ind: "10", content: "$a 1984 / $c George Orwell." },
                    { tag: "260", ind: "#1", content: "$a London : $b Secker & Warburg, $c 1949." },
                    { tag: "300", ind: "##", content: "$a 328 pages ; $c 21 cm" }
                ],
                wrongField: "100",
                errorType: "Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª",
                correctValue: "1#",
                question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„Ø­Ù‚Ù„ 100ØŸ (Ø§Ø³ØªØ®Ø¯Ù… # Ù„Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„ÙØ§Ø±ØºØ©ØŒ Ù…Ø«Ø§Ù„: 0#)",
                hint: "Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø£ÙˆÙ„ ØµØ­ÙŠØ­ (1)ØŒ Ù„ÙƒÙ† Ø§Ù„Ù…Ø¤Ø´Ø± Ø§Ù„Ø«Ø§Ù†ÙŠ ÙÙŠ Ù…Ø§Ø±Ùƒ Ù„Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø¹Ø§Ø¯Ø© Ù…Ø§ ÙŠÙƒÙˆÙ† ÙØ§Ø±ØºØ§Ù‹ (#)."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 245 (Ø§Ù„Ø¹Ù†ÙˆØ§Ù†) ÙŠÙ†Ù‚ØµÙ‡ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙØ±Ø¹ÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ø¨ÙŠØ§Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© (Ø§Ù„Ù…Ø¤Ù„Ù).",
                icon: "ğŸ“š",
                difficulty: "Ø³Ù‡Ù„",
                difficultyClass: "easy",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 245: $a = Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŒ $b = Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙØ±Ø¹ÙŠØŒ $c = Ø¨ÙŠØ§Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©.",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "008", ind: "##", content: "120405s1813    enk           000 1 eng d" },
                    { tag: "100", ind: "1#", content: "$a Austen, Jane, $d 1775-1817." },
                    { tag: "245", ind: "10", content: "$a Pride and Prejudice / $a Jane Austen." },
                    { tag: "260", ind: "#1", content: "$a London : $b T. Egerton, $c 1813." },
                    { tag: "300", ind: "##", content: "$a 432 pages ; $c 20 cm" }
                ],
                wrongField: "245",
                errorType: "Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ÙØ±Ø¹ÙŠØ©",
                correctValue: "$c",
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙØ±Ø¹ÙŠ Ø§Ù„ØµØ­ÙŠØ­ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ³Ø¨Ù‚ Ø§Ø³Ù… 'Jane Austen' ÙÙŠ Ø­Ù‚Ù„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†ØŸ",
                hint: "Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ ÙŠØ£Ø®Ø° $aØŒ ÙˆÙ„ÙƒÙ† Ø§Ø³Ù… Ø§Ù„Ù…Ø¤Ù„Ù (Ø¨ÙŠØ§Ù† Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ÙŠØ©) ÙŠØ£Ø®Ø° Ø±Ù…Ø²Ø§Ù‹ Ø¢Ø®Ø±."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 260 (Ø§Ù„Ù†Ø´Ø±) ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª ÙˆØ®Ø·Ø£ ÙÙŠ Ø±Ù…Ø² Ù…ÙƒØ§Ù† Ø§Ù„Ù†Ø´Ø±.",
                icon: "ğŸ¢",
                difficulty: "Ù…ØªÙˆØ³Ø·",
                difficultyClass: "medium",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 260: Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª Ø¹Ø§Ø¯Ø© '#1'. $a Ù…ÙƒØ§Ù† Ø§Ù„Ù†Ø´Ø±ØŒ $b Ø§Ù„Ù†Ø§Ø´Ø±ØŒ $c ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±.",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "008", ind: "##", content: "320115s1932    xxk           000 1 eng d" },
                    { tag: "100", ind: "1#", content: "$a Huxley, Aldous, $d 1894-1963." },
                    { tag: "245", ind: "10", content: "$a Brave new world / $c Aldous Huxley." },
                    { tag: "260", ind: "00", content: "$x London : $b Chatto & Windus, $c 1932." },
                    { tag: "300", ind: "##", content: "$a 311 pages ; $c 20 cm" }
                ],
                wrongField: "260",
                errorType: "Ø£Ø®Ø·Ø§Ø¡ Ù…ØªØ¹Ø¯Ø¯Ø©",
                correctValue: "#1 $a London : $b Chatto & Windus, $c 1932.",
                question: "Ø§ÙƒØªØ¨ Ø§Ù„Ø­Ù‚Ù„ 260 ÙƒØ§Ù…Ù„Ø§Ù‹ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ (Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª ÙˆØ§Ù„Ø¨ÙŠØ§Ù†Ø§Øª). Ø§Ø³ØªØ®Ø¯Ù… # Ù„Ù„Ù…Ø³Ø§ÙØ§Øª ÙÙŠ Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª.",
                hint: "Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† '#1'. ÙˆØ±Ù…Ø² Ù…ÙƒØ§Ù† Ø§Ù„Ù†Ø´Ø± Ù‡Ùˆ $a ÙˆÙ„ÙŠØ³ $x."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 300 (Ø§Ù„ÙˆØµÙ Ø§Ù„Ù…Ø§Ø¯ÙŠ) ÙŠØ³ØªØ®Ø¯Ù… ØªØ±ØªÙŠØ¨Ø§Ù‹ Ø®Ø§Ø·Ø¦Ø§Ù‹ Ù„Ù„Ø±Ù…ÙˆØ² Ø§Ù„ÙØ±Ø¹ÙŠØ©.",
                icon: "ğŸ“",
                difficulty: "Ù…ØªÙˆØ³Ø·",
                difficultyClass: "medium",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 300: $a Ø§Ù„Ù…Ø¯Ù‰ (ØµÙØ­Ø§Øª)ØŒ $b ØªÙØ§ØµÙŠÙ„ Ù…Ø§Ø¯ÙŠØ© Ø£Ø®Ø±Ù‰ØŒ $c Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯.",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "100", ind: "1#", content: "$a Fitzgerald, F. Scott $q (Francis Scott), $d 1896-1940." },
                    { tag: "245", ind: "10", content: "$a The great Gatsby / $c F. Scott Fitzgerald." },
                    { tag: "260", ind: "#1", content: "$a New York : $b Charles Scribner's Sons, $c 1925." },
                    { tag: "300", ind: "##", content: "$b 218 pages $a 21 cm" }
                ],
                wrongField: "300",
                errorType: "ØªØ±ØªÙŠØ¨ Ø®Ø§Ø·Ø¦",
                correctValue: "$a 218 pages $c 21 cm",
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ø±Ù…ÙˆØ² Ø§Ù„ÙØ±Ø¹ÙŠØ© ÙˆÙ…Ø­ØªÙˆØ§Ù‡Ø§ ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ 300ØŸ",
                hint: "Ø¹Ø¯Ø¯ Ø§Ù„ØµÙØ­Ø§Øª ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ£ØªÙŠ Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø±Ù…Ø² $aØŒ Ø«Ù… Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø¨Ø±Ù…Ø² $c."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 008 ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ØªØ§Ø±ÙŠØ® Ù†Ø´Ø± Ù„Ø§ ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ø­Ù‚Ù„ 260.",
                icon: "ğŸ“…",
                difficulty: "ØµØ¹Ø¨",
                difficultyClass: "hard",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 008: Ø§Ù„Ù…ÙˆØ§Ø¶Ø¹ 07-10 Ù…Ø®ØµØµØ© Ù„Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø± Ø§Ù„Ø£ÙˆÙ„Ù‰.",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "008", ind: "##", content: "370612s1999    enk           000 1 eng d" },
                    { tag: "100", ind: "1#", content: "$a Tolkien, J. R. R. $d 1892-1973." },
                    { tag: "245", ind: "10", content: "$a The hobbit / $c J.R.R. Tolkien." },
                    { tag: "260", ind: "#1", content: "$a London : $b George Allen & Unwin, $c 1937." },
                    { tag: "300", ind: "##", content: "$a 310 pages ; $c 21 cm" }
                ],
                wrongField: "008",
                errorType: "ØªØ¶Ø§Ø±Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
                correctValue: "1937",
                question: "Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø³Ù†Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ 008 Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† 1999ØŸ",
                hint: "Ø§Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ø­Ù‚Ù„ 260ØŒ Ø§Ù„Ø±Ù…Ø² $c Ù„Ù…Ø¹Ø±ÙØ© Ø³Ù†Ø© Ø§Ù„Ù†Ø´Ø± Ø§Ù„ÙØ¹Ù„ÙŠØ© Ù„Ù„ÙƒØªØ§Ø¨."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 250 (Ø¨ÙŠØ§Ù† Ø§Ù„Ø·Ø¨Ø¹Ø©) Ù…ÙƒØªÙˆØ¨ Ø¨ØµÙŠØºØ© ØºÙŠØ± Ù‚ÙŠØ§Ø³ÙŠØ©.",
                icon: "ğŸ“",
                difficulty: "Ø³Ù‡Ù„",
                difficultyClass: "easy",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 250: $a Ø¨ÙŠØ§Ù† Ø§Ù„Ø·Ø¨Ø¹Ø© (Ù…Ø«Ù„: Ø§Ù„Ø·Ø¨Ø¹Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©ØŒ 2nd ed.).",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "100", ind: "1#", content: "$a Hemingway, Ernest, $d 1899-1961." },
                    { tag: "245", ind: "10", content: "$a The old man and the sea." },
                    { tag: "250", ind: "##", content: "$a Two edition." },
                    { tag: "260", ind: "#1", content: "$a New York : $b Scribner, $c 1952." }
                ],
                wrongField: "250",
                errorType: "ØµÙŠØ§ØºØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
                correctValue: "$a 2nd ed.",
                question: "ØµØ­Ø­ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø­Ù‚Ù„ 250 Ù„ÙŠØªØ¨Ø¹ Ø§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª Ø§Ù„Ù…Ø¹ÙŠØ§Ø±ÙŠØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© (Ø§Ø³ØªØ®Ø¯Ù…: 2nd ed.).",
                hint: "ÙÙŠ Ø§Ù„ÙÙ‡Ø±Ø³Ø© Ø§Ù„Ø£Ù†Ø¬Ù„Ùˆ-Ø£Ù…Ø±ÙŠÙƒÙŠØ©ØŒ Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙˆØ§Ù„Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù…Ø«Ù„ '2nd ed.'."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 650 (Ø±Ø¤ÙˆØ³ Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø§Øª) ÙŠØ³ØªØ®Ø¯Ù… ØªØ§Ø¬Ø§Ù‹ Ø®Ø§Ø·Ø¦Ø§Ù‹ Ù„Ù†ÙˆØ¹ Ø£Ø¯Ø¨ÙŠ.",
                icon: "ğŸ·ï¸",
                difficulty: "Ù…ØªÙˆØ³Ø·",
                difficultyClass: "medium",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 650 Ù„Ù„Ù…ÙˆØ¶ÙˆØ¹Ø§Øª. Ø§Ù„Ø­Ù‚Ù„ 655 Ù„Ù„Ø£Ø´ÙƒØ§Ù„/Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø¯Ø¨ÙŠØ© (Genre/Form).",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "100", ind: "1#", content: "$a Christie, Agatha, $d 1890-1976." },
                    { tag: "245", ind: "10", content: "$a Murder on the Orient Express." },
                    { tag: "650", ind: "#0", content: "$a Detective and mystery stories." },
                    { tag: "700", ind: "1#", content: "$a Poirot, Hercule (Fictitious character)." }
                ],
                wrongField: "650",
                errorType: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ§Ø¬",
                correctValue: "655",
                question: "Ù…ØµØ·Ù„Ø­ 'Detective and mystery stories' Ù‡Ùˆ Ù†ÙˆØ¹ Ø£Ø¯Ø¨ÙŠ ÙˆÙ„ÙŠØ³ Ù…ÙˆØ¶ÙˆØ¹Ø§Ù‹. Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ§Ø¬ Ø§Ù„ØµØ­ÙŠØ­ØŸ",
                hint: "Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø¯Ø¨ÙŠØ© ÙˆØ§Ù„Ø£Ø´ÙƒØ§Ù„ ØªÙˆØ¶Ø¹ Ø¹Ø§Ø¯Ø© ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ 655."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 700 (Ù…Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ) ÙŠÙ†Ù‚ØµÙ‡ ØªØ­Ø¯ÙŠØ¯ Ø¯ÙˆØ± Ø§Ù„Ø´Ø®Øµ.",
                icon: "ğŸ‘¥",
                difficulty: "ØµØ¹Ø¨",
                difficultyClass: "hard",
                marcInfo: "Ø§Ù„Ø­Ù‚Ù„ 700: $a Ø§Ù„Ø§Ø³Ù…ØŒ $e Ù…ØµØ·Ù„Ø­ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© (Ù…Ø«Ù„: translator, editor).",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "100", ind: "1#", content: "$a Garcia Marquez, Gabriel, $d 1927-2014." },
                    { tag: "240", ind: "10", content: "$a Cien anos de soledad. $l English" },
                    { tag: "245", ind: "14", content: "$a One hundred years of solitude / $c translated by Gregory Rabassa." },
                    { tag: "700", ind: "1#", content: "$a Rabassa, Gregory." }
                ],
                wrongField: "700",
                errorType: "Ù†Ù‚Øµ Ø¨ÙŠØ§Ù†Ø§Øª ÙØ±Ø¹ÙŠØ©",
                correctValue: "$e translator.",
                question: "Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ÙØ±Ø¹ÙŠ ÙˆØ§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„ØªÙŠ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„Ø­Ù‚Ù„ 700 Ù„ØªÙˆØ¶ÙŠØ­ Ø£Ù† Gregory Ù‡Ùˆ Ø§Ù„Ù…ØªØ±Ø¬Ù…ØŸ",
                hint: "Ø£Ø¶Ù $e Ù…ØªØ¨ÙˆØ¹Ø© Ø¨ÙƒÙ„Ù…Ø© 'translator.'."
            },
            {
                caseDescription: "ÙØ§ØªØ­ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø© (Leader) ÙŠØ´ÙŠØ± Ù„Ù†ÙˆØ¹ Ù…Ø§Ø¯Ø© Ø®Ø§Ø·Ø¦.",
                icon: "ğŸ’¾",
                difficulty: "ØµØ¹Ø¨",
                difficultyClass: "hard",
                marcInfo: "Ø§Ù„Ù…ÙˆØ¶Ø¹ 06 ÙÙŠ Ø§Ù„Ù€ Leader: 'a' Ù„Ù„ÙƒØªØ§Ø¨ (Ù†Øµ)ØŒ 'm' Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ 'g' Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©.",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000mam a2200000 i 4500" },
                    { tag: "008", ind: "##", content: "950101s1995    nyu           000 1 eng d" },
                    { tag: "245", ind: "00", content: "$a Microsoft Windows 95 $h [electronic resource]." },
                    { tag: "260", ind: "#1", content: "$a Redmond, WA : $b Microsoft, $c 1995." },
                    { tag: "300", ind: "##", content: "$a 1 computer optical disc ; $c 4 3/4 in." }
                ],
                wrongField: "LDR",
                errorType: "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯",
                correctValue: "m",
                question: "Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø© Ù„Ù…Ù„Ù ÙƒÙ…Ø¨ÙŠÙˆØªØ±ØŒ Ù„ÙƒÙ† Ø§Ù„ÙƒÙˆØ¯ ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø§Ø¯Ø³ Ù…Ù† Ø§Ù„Ù€ LDR Ù‡Ùˆ 'a' (Ù†Øµ). Ù…Ø§ Ù‡Ùˆ Ø§Ù„Ø­Ø±Ù Ø§Ù„ØµØ­ÙŠØ­ØŸ",
                hint: "Ù…ÙˆØ§Ø¯ Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒÙ…Ø¨ÙŠÙˆØªØ± (Computer files) ØªØ£Ø®Ø° Ø§Ù„ÙƒÙˆØ¯ 'm' ÙÙŠ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø§Ø¯Ø³."
            },
            {
                caseDescription: "Ø§Ù„Ø­Ù‚Ù„ 500 (Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ø§Ù…Ø©) ÙŠØ³ØªØ®Ø¯Ù… ØªØ§Ø¬Ø§Ù‹ Ø®Ø§Ø·Ø¦Ø§Ù‹ Ù„Ù…Ù„Ø§Ø­Ø¸Ø© Ø§Ù„Ø¨Ø¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©.",
                icon: "ğŸ“",
                difficulty: "Ù…ØªÙˆØ³Ø·",
                difficultyClass: "medium",
                marcInfo: "500: Ù…Ù„Ø§Ø­Ø¸Ø© Ø¹Ø§Ù…Ø©. 504: Ù…Ù„Ø§Ø­Ø¸Ø© Ø¨Ø¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©/ÙƒØ´Ø§Ù.",
                marcRecord: [
                    { tag: "LDR", ind: "##", content: "00000cam a2200000 i 4500" },
                    { tag: "100", ind: "1#", content: "$a Eco, Umberto." },
                    { tag: "245", ind: "10", content: "$a The name of the rose." },
                    { tag: "500", ind: "##", content: "$a Includes bibliographical references (p. 500-502)." }
                ],
                wrongField: "500",
                errorType: "Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ§Ø¬",
                correctValue: "504",
                question: "Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© ØªØªØ­Ø¯Ø« Ø¹Ù† Ù…Ø±Ø§Ø¬Ø¹ Ø¨Ø¨Ù„ÙŠÙˆØ¬Ø±Ø§ÙÙŠØ©. Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ§Ø¬ Ø§Ù„Ø£ÙƒØ«Ø± Ø¯Ù‚Ø© Ù…Ù† 500ØŸ",
                hint: "Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ ÙˆØ§Ù„ÙƒØ´Ø§ÙØ§Øª (Bibliography note) Ù„Ù‡Ø§ ØªØ§Ø¬ Ù…Ø®ØµØµ ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 50."
            }
        ];

        let currentLevel = 0;
        let score = 0;
        let correctAnswers = 0;

        // Ø¹Ù†Ø§ØµØ± ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const ui = {
            levelNumber: document.getElementById('levelNumber'),
            scoreDisplay: document.getElementById('scoreDisplay'),
            progressFill: document.getElementById('progressFill'),
            progressText: document.getElementById('progressText'),
            caseTitle: document.getElementById('caseTitle'),
            caseDescription: document.getElementById('caseDescription'),
            caseIcon: document.getElementById('caseIcon'),
            difficultyBadge: document.getElementById('difficultyBadge'),
            marcInfo: document.getElementById('marcInfo'),
            marcRecordDisplay: document.getElementById('marcRecordDisplay'),
            questionText: document.getElementById('questionText'),
            answerInput: document.getElementById('answerInput'),
            submitBtn: document.getElementById('submitBtn'),
            hintBtn: document.getElementById('hintBtn'),
            hintContainer: document.getElementById('hintContainer'),
            hintText: document.getElementById('hintText'),
            feedback: document.getElementById('feedback'),
            nextBtn: document.getElementById('nextBtn'),
            nextButtonContainer: document.getElementById('nextButtonContainer'),
            gameContent: document.getElementById('gameContent'),
            gameOverContent: document.getElementById('gameOverContent'),
            // Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
            finalScore: document.getElementById('finalScore'),
            statsLevels: document.getElementById('statsLevels'),
            statsCorrect: document.getElementById('statsCorrect'),
            statsAverage: document.getElementById('statsAverage'),
            statsSuccess: document.getElementById('statsSuccess'),
            finalMessage: document.getElementById('finalMessage')
        };

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
        function initGame() {
            currentLevel = 0;
            score = 0;
            correctAnswers = 0;
            loadLevel(currentLevel);
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
        function loadLevel(index) {
            if (index >= levels.length) {
                endGame();
                return;
            }

            const level = levels[index];

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
            ui.levelNumber.textContent = index + 1;
            ui.scoreDisplay.textContent = score;
            const progressPercent = ((index) / levels.length) * 100;
            ui.progressFill.style.width = `${progressPercent}%`;
            ui.progressText.textContent = `${index + 1}/${levels.length}`;

            // ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù‚Ø¶ÙŠØ©
            ui.caseTitle.textContent = `Ø§Ù„Ù‚Ø¶ÙŠØ© Ø±Ù‚Ù… ${index + 1}`;
            ui.caseDescription.textContent = level.caseDescription;
            ui.caseIcon.textContent = level.icon;

            // Ø´Ø§Ø±Ø© Ø§Ù„ØµØ¹ÙˆØ¨Ø©
            ui.difficultyBadge.textContent = level.difficulty;
            ui.difficultyBadge.className = 'detective-difficulty-badge'; // reset
            ui.difficultyBadge.classList.add(`detective-difficulty-${level.difficultyClass}`);

            // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø§Ø±Ùƒ
            ui.marcInfo.textContent = `ğŸ’¡ Ù‚Ø§Ø¹Ø¯Ø© Ù…Ø§Ø±Ùƒ: ${level.marcInfo}`;

            // Ø¹Ø±Ø¶ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø©
            renderMarcRecord(level.marcRecord, level.wrongField);

            // Ø§Ù„Ø³Ø¤Ø§Ù„
            ui.questionText.textContent = level.question;
            ui.answerInput.value = '';
            ui.answerInput.disabled = false;
            ui.submitBtn.disabled = false;
            ui.hintContainer.classList.remove('show');
            ui.feedback.classList.remove('show');
            ui.feedback.className = 'detective-feedback';
            ui.nextButtonContainer.style.display = 'none';
            ui.hintText.textContent = level.hint;
        }

        // Ø±Ø³Ù… ØªØ³Ø¬ÙŠÙ„Ø© Ù…Ø§Ø±Ùƒ
        function renderMarcRecord(record, wrongFieldTag) {
            ui.marcRecordDisplay.innerHTML = '';
            record.forEach(field => {
                const div = document.createElement('div');
                div.className = 'marc-field';
                if (field.tag === wrongFieldTag) {
                    div.classList.add('has-error');
                }

                // ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ø±Ù…ÙˆØ² Ø§Ù„ÙØ±Ø¹ÙŠØ© $ Ù„ØªÙ…ÙŠÙŠØ²Ù‡Ø§
                let contentHtml = field.content.replace(/(\$[a-z0-9])/g, '<span style="color:#22c55e; font-weight:bold;">$1</span>');

                div.innerHTML = `
                    <div class="marc-field-tag">${field.tag}</div>
                    <div class="marc-field-ind">${field.ind}</div>
                    <div class="marc-field-content">${contentHtml}</div>
                `;

                if (field.tag === wrongFieldTag) {
                    div.innerHTML += `<div class="detective-error-badge">Ù…Ø­Ù„ Ø§Ù„Ø´Ùƒ!</div>`;
                }

                ui.marcRecordDisplay.appendChild(div);
            });
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        function checkAnswer() {
            const userAnswer = ui.answerInput.value.trim();
            if (!userAnswer) return;

            const level = levels[currentLevel];
            // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø© (ØªØ¬Ø§Ù‡Ù„ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø§Ù„Ø²Ø§Ø¦Ø¯Ø© ÙˆØ­Ø§Ù„Ø© Ø§Ù„Ø£Ø­Ø±Ù)
            // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ù€ # Ø£Ùˆ Ù…Ø³Ø§ÙØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¤Ø´Ø±Ø§Øª
            const cleanUser = userAnswer.toLowerCase().replace(/\s+/g, ' ').replace(/#/g, ' ');
            const cleanCorrect = level.correctValue.toLowerCase().replace(/\s+/g, ' ').replace(/#/g, ' ');

            // ØªØ­Ù‚Ù‚ Ù…Ø±Ù† Ù‚Ù„ÙŠÙ„Ø§Ù‹ (Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¶Ù…Ù† Ø§Ù„Ù†Øµ Ø§Ù„ØµØ­ÙŠØ­ Ø£Ùˆ Ø§Ù„Ø¹ÙƒØ³ Ù„Ù„Ø·ÙˆÙŠÙ„Ø©)
            let isCorrect = cleanUser === cleanCorrect;

            // Ø­Ø§Ù„Ø§Øª Ø®Ø§ØµØ© Ù„Ù„ØªØ³Ù‡ÙŠÙ„
            if (!isCorrect && level.correctValue.includes(userAnswer) && userAnswer.length > 5) isCorrect = true;
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒØªØ¨ Ø§Ù„Ø±Ù…Ø² ÙÙ‚Ø· (Ù…Ø«Ù„Ø§Ù‹ $c) ÙˆØ§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØªØªØ·Ù„Ø¨ Ø°Ù„Ùƒ
            if (!isCorrect && cleanCorrect.includes(cleanUser) && cleanUser.startsWith('$')) isCorrect = true;

            ui.answerInput.disabled = true;
            ui.submitBtn.disabled = true;
            ui.feedback.classList.add('show');

            if (isCorrect) {
                // Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©
                const points = calculatePoints(level.difficultyClass);
                score += points;
                correctAnswers++;
                ui.scoreDisplay.textContent = score;

                ui.feedback.classList.add('correct');
                ui.feedback.innerHTML = `
                    <span class="detective-feedback-icon">âœ…</span>
                    <div>
                        <strong>Ø£Ø­Ø³Ù†Øª! Ø¥Ø¬Ø§Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø©.</strong><br>
                        ${getCompliment()}
                    </div>
                `;
            } else {
                // Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©
                ui.feedback.classList.add('incorrect');
                ui.feedback.innerHTML = `
                    <span class="detective-feedback-icon">âŒ</span>
                    <div>
                        <strong>Ù„Ù„Ø£Ø³ÙØŒ Ø¥Ø¬Ø§Ø¨Ø© ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø©.</strong><br>
                        Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙƒØ§Ù†Øª: <span style="font-family:'Courier New'; font-weight:bold;">${level.correctValue}</span>
                    </div>
                `;
            }

            ui.nextButtonContainer.style.display = 'block';

            // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… Ù„ÙŠÙ…ØªÙ„Ø¦ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
            const progressPercent = ((currentLevel + 1) / levels.length) * 100;
            ui.progressFill.style.width = `${progressPercent}%`;
        }

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
        function calculatePoints(difficulty) {
            switch (difficulty) {
                case 'easy': return 100;
                case 'medium': return 200;
                case 'hard': return 300;
                default: return 100;
            }
        }

        // Ø¬Ù…Ù„ ØªØ´Ø¬ÙŠØ¹ÙŠØ©
        function getCompliment() {
            const compliments = [
                "Ù„Ø¯ÙŠÙƒ Ø¹ÙŠÙ† Ø«Ø§Ù‚Ø¨Ø© ÙƒØ§Ù„ÙÙ‡Ø±Ø³!",
                "Ù…Ø§Ø±Ùƒ21 ÙŠÙØªØ®Ø± Ø¨Ùƒ!",
                "Ø£Ù†Øª ÙÙŠ Ø·Ø±ÙŠÙ‚Ùƒ Ù„ØªØµØ¨Ø­ ÙƒØ¨ÙŠØ± Ø§Ù„ÙÙ‡Ø±Ø³ÙŠÙ†.",
                "Ø¶Ø¨Ø· Ù…Ù…ØªØ§Ø² Ù„Ù„Ù…Ø¹Ø§ÙŠÙŠØ±!"
            ];
            return compliments[Math.floor(Math.random() * compliments.length)];
        }

        // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
        function endGame() {
            ui.gameContent.style.display = 'none';
            ui.gameOverContent.style.display = 'flex';

            ui.finalScore.textContent = score;
            ui.statsLevels.textContent = levels.length;
            ui.statsCorrect.textContent = correctAnswers;

            const average = Math.round(score / levels.length);
            ui.statsAverage.textContent = average;

            const successRate = Math.round((correctAnswers / levels.length) * 100);
            ui.statsSuccess.textContent = `${successRate}%`;

            if (successRate >= 90) {
                ui.finalMessage.textContent = "ğŸ† Ø£Ø¯Ø§Ø¡ Ø£Ø³Ø·ÙˆØ±ÙŠ! Ø£Ù†Øª Ø®Ø¨ÙŠØ± ÙÙ‡Ø±Ø³Ø© Ù…Ø¹ØªÙ…Ø¯.";
            } else if (successRate >= 70) {
                ui.finalMessage.textContent = "ğŸ¥ˆ Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹! ØªØ­ØªØ§Ø¬ Ù„Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¨Ø³ÙŠØ·Ø©.";
            } else {
                ui.finalMessage.textContent = "ğŸ“š Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬ÙŠØ¯Ø©! Ù…Ø§Ø±Ùƒ21 ÙŠØ­ØªØ§Ø¬ Ù„Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„ØªØ¯Ø±ÙŠØ¨.";
            }
        }

        // Event Listeners
        ui.submitBtn.addEventListener('click', checkAnswer);

        ui.answerInput.addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        ui.hintBtn.addEventListener('click', () => {
            ui.hintContainer.classList.toggle('show');
            // Ø®ØµÙ… Ø¨Ø³ÙŠØ· Ù„Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªÙ„Ù…ÙŠØ­ (Ø§Ø®ØªÙŠØ§Ø±ÙŠØŒ ØºÙŠØ± Ù…ÙØ¹Ù„ Ø­Ø§Ù„ÙŠØ§Ù‹ Ù„Ù„ØªØ´Ø¬ÙŠØ¹)
        });

        ui.nextBtn.addEventListener('click', () => {
            currentLevel++;
            loadLevel(currentLevel);
        });

        // Ø§Ù„Ø¨Ø¯Ø¡
        initGame();

    </script>
</body>

</html>